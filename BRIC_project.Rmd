---
title: "BRIC_project"
author: 
  name: Manuel Schreiber
output:
  pdf_document: default
  html_notebook: default
  latex_engine: pdflatex
  html_document:
    toc: true
    toc_float: true
    theme: united
    df_print: paged
  header-includes:
   - \usepackage{amsmath}
   - \usepackage{amsfonts}
---

**BRIC Project**

```{r}
# clear workspace
##rm(list=ls())
```


getting the current WD

```{r}
getwd()
```

changing the WD

```{r}
setwd("/Users/Manu/Desktop/TUM_Master_Mgt_Technology/TUM_SS_21/Empirical Asset Pricing seminar/Seminar Thesis/BRIC_data")
```

# Loading Libraries

```{r}
# loading libraries
library(data.table) # extension of the data.frame package. It is widely used for fast aggregation of large datasets, low latency add/update/remove of columns, quicker ordered joins, and a fast file reader.
library(dplyr) # data manipulation package
library(lubridate)
library(zoo) # methods for totally ordered indexed observations. It aims at performing calculations containing irregular time series of numeric vectors, matrices & factors

library(stats)

```


# Loading in the R.data

Data column descriptions (Worldscope):
https://www.professors.wi.tum.de/fileadmin/w00bca/fm/Worldscope_Data_Definition_Guide_Issue_15.pdf


```{r}
# loading R.data BRIC monthly
load("/Users/Manu/Desktop/TUM_Master_Mgt_Technology/TUM_SS_21/Empirical Asset Pricing seminar/Seminar Thesis/BRIC_data/BRIC_monthly.RData")

# loading R.data BRIC monthly
load("/Users/Manu/Desktop/TUM_Master_Mgt_Technology/TUM_SS_21/Empirical Asset Pricing seminar/Seminar Thesis/BRIC_data/BRIC_static.RData")

# loading R.data BRIC monthly
load("/Users/Manu/Desktop/TUM_Master_Mgt_Technology/TUM_SS_21/Empirical Asset Pricing seminar/Seminar Thesis/BRIC_data/BRIC_yearly.RData")
```

```{r}
str(BRIC.monthly)
```



```{r}
str(BRIC.static)
```

```{r}
str(BRIC.yearly)

head(BRIC.yearly)
```


*TO DO's*:

- Calculate Benchmark (market-cap weighted big stocks of the BRIC region)
- Calculate break points on big stocks
- decide on strategy and implement it
- calculate portfolio characteristics
- visualize and showcase strategy performance
- regress strategy PF on FF5FM and momentum for style exposure analysis

EDA


```{r}
summary(BRIC.monthly$ym)
```


```{r}
# finding the number of NA values by column in the dataframe
BRIC.monthly %>% mutate_all(is.na) %>% summarize_all(sum)

```

```{r}
# finding the number of NA values by column in the dataframe
BRIC.static %>% mutate_all(is.na) %>% summarize_all(sum)
```


```{r}
# regular correlation matrix of all (four) numeric attributes
cor(select(BRIC.static, where(is.numeric)))
```


```{r}
# number of entries stocks per country
tabulate(as.factor(BRIC.monthly$country));

unique(BRIC.monthly$country)
```

```{r}
# unqiue industries
unique(BRIC.static$INDM)
# Real Estate: Residential REITs, Retail RETS, Diversified REITS, Mortgage REITS, Specialty REITS, Ind. & Office REITS
# Commodities: Iron & Steel, Commodity Chemicals, General Mining, Integrated Oil and Gas, Alternative Fuels, 
# Infrastructure: Railroads, Transportation Services, Alternative Fuels, Alt. Electricity
```

```{r}
# cross tab plot of ownership interest and certain features with legend
# cex.names: expansion factor for the axis labels
barplot(with(BRIC.static, table(INDM)), beside = TRUE, legend.text = TRUE, main = "Crosstab", cex.names = 0.4)

```


```{r}
# Market Cap values
summary(BRIC.monthly$MV.USD)
summary(BRIC.monthly$RET.USD)

```



```{r}
# construct value-weighted market
VWM <-merge(Data_Excursus1[,-c("Date")],
                      BRIC.monthly,by="ym")

```

